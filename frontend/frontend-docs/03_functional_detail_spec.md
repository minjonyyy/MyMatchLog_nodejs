# 📄 03_functional_detail_spec.md - 기능 상세 명세서 (Functional Detail Spec)

이 문서는 'MyMatchLog' 플랫폼의 각 기능별 입력 값, 처리 방식, 출력 결과를 구체적으로 정의합니다. 프론트엔드에서 구현해야 할 로직과 화면 동작을 명확히 합니다.

---

## 🔐 인증 기능

### 기능명: 사용자 로그인
- **입력**: 
  - 이메일 (문자열, 필수)
  - 비밀번호 (문자열, 필수)
- **처리**: 
  - 입력값 유효성 검증
  - API 호출: `POST /api/users/login`
  - JWT 토큰 저장 (localStorage)
  - 로그인 상태 관리
- **출력**: 
  - 성공 시: `/mypage` 페이지로 이동
  - 실패 시: 에러 메시지 표시

### 기능명: 사용자 회원가입
- **입력**: 
  - 이메일 (문자열, 필수)
  - 비밀번호 (문자열, 필수, 8자 이상)
  - 닉네임 (문자열, 필수)
  - 응원팀 (선택사항)
- **처리**: 
  - 실시간 유효성 검증
  - API 호출: `POST /api/users/signup`
  - 중복 검사 (이메일, 닉네임)
- **출력**: 
  - 성공 시: `/login` 페이지로 이동
  - 실패 시: 필드별 에러 메시지

### 기능명: Access Token 갱신
- **입력**: 
  - Refresh Token (localStorage에서 자동 추출)
- **처리**: 
  - API 호출: `POST /api/users/token`
  - 새 Access Token 저장
- **출력**: 
  - 성공 시: 원래 요청 재시도
  - 실패 시: 로그인 페이지로 리다이렉트

---

## ⚾ 직관 기록 기능

### 기능명: 직관 기록 목록 조회
- **입력**: 
  - 페이지 번호 (기본값: 1)
  - 페이지당 항목 수 (기본값: 10)
  - 필터 조건 (날짜, 팀, 결과)
- **처리**: 
  - API 호출: `GET /api/match-logs?page=${page}&limit=${limit}`
  - 필터링 로직 (프론트엔드)
  - 페이지네이션 처리
- **출력**: 
  - 직관 기록 카드 목록
  - 페이지네이션 컴포넌트
  - 로딩 상태 표시

### 기능명: 직관 기록 작성
- **입력**: 
  - 경기 날짜 (Date)
  - 홈팀 (Integer)
  - 원정팀 (Integer)
  - 경기장 (Integer)
  - 결과 (WIN/LOSS/DRAW, 선택사항)
  - 메모 (문자열, 선택사항)
  - 티켓 이미지 (File, 선택사항)
- **처리**: 
  - 실시간 유효성 검증
  - 이미지 업로드 처리
  - API 호출: `POST /api/match-logs` (multipart/form-data)
- **출력**: 
  - 성공 시: `/match-logs` 페이지로 이동
  - 실패 시: 필드별 에러 메시지

### 기능명: 티켓 OCR 정보 추출
- **입력**: 
  - 티켓 이미지 파일 (File, 필수)
- **처리**: 
  - 이미지 업로드
  - API 호출: `POST /api/ocr/parse-ticket`
  - OCR 결과 파싱
- **출력**: 
  - 성공 시: 자동으로 폼 필드 채우기
  - 실패 시: 수동 입력 안내 메시지

### 기능명: 직관 기록 수정
- **입력**: 
  - 기존 기록 ID
  - 수정할 필드들 (선택적)
- **처리**: 
  - 기존 데이터 로드
  - API 호출: `PATCH /api/match-logs/:id`
- **출력**: 
  - 성공 시: 상세 페이지로 이동
  - 실패 시: 에러 메시지

### 기능명: 직관 기록 삭제
- **입력**: 
  - 기록 ID
- **처리**: 
  - 삭제 확인 다이얼로그
  - API 호출: `DELETE /api/match-logs/:id`
- **출력**: 
  - 성공 시: 목록 페이지로 이동
  - 실패 시: 에러 메시지

---

## 🎉 이벤트 기능

### 기능명: 이벤트 목록 조회
- **입력**: 
  - 필터 조건 (진행 중, 종료됨)
- **처리**: 
  - API 호출: `GET /api/events`
  - 상태별 필터링 (프론트엔드)
- **출력**: 
  - 이벤트 카드 목록
  - 이벤트 상태별 색상 구분

### 기능명: 이벤트 상세 조회
- **입력**: 
  - 이벤트 ID
- **처리**: 
  - API 호출: `GET /api/events/:id`
  - 참여 가능 여부 확인
- **출력**: 
  - 이벤트 상세 정보
  - 참여 신청 버튼 (조건부 표시)

### 기능명: 이벤트 참여 신청
- **입력**: 
  - 이벤트 ID
- **처리**: 
  - 참여 확인 다이얼로그
  - API 호출: `POST /api/events/:id/participate`
  - 동시성 제어 (로딩 상태)
- **출력**: 
  - 성공 시: 참여 완료 메시지
  - 실패 시: 에러 메시지 (정원 마감, 이미 참여 등)

---

## 👤 사용자 관리 기능

### 기능명: 내 정보 조회
- **입력**: 
  - 없음 (JWT 토큰에서 사용자 정보 추출)
- **처리**: 
  - API 호출: `GET /api/users/me`
  - 사용자 정보 상태 관리
- **출력**: 
  - 사용자 프로필 정보
  - 응원팀 정보
  - 가입일 정보

### 기능명: 내 정보 수정
- **입력**: 
  - 닉네임 (문자열, 선택사항)
  - 응원팀 (Integer, 선택사항)
- **처리**: 
  - 실시간 유효성 검증
  - API 호출: `PATCH /api/users/me`
- **출력**: 
  - 성공 시: 업데이트된 정보 표시
  - 실패 시: 에러 메시지

### 기능명: 직관 통계 조회
- **입력**: 
  - 기간 필터 (전체, 올해, 이번 달)
- **처리**: 
  - 직관 기록 데이터 분석
  - 차트 데이터 생성
- **출력**: 
  - 총 직관 횟수
  - 팀별 직관 통계
  - 월별 직관 트렌드
  - 경기장별 방문 통계

---

## 🏟️ 공통 기능

### 기능명: 팀 목록 조회
- **입력**: 
  - 없음
- **처리**: 
  - API 호출: `GET /api/teams`
  - 캐싱 처리
- **출력**: 
  - 팀 목록 (드롭다운, 라디오 버튼 등)

### 기능명: 경기장 목록 조회
- **입력**: 
  - 없음
- **처리**: 
  - API 호출: `GET /api/stadiums`
  - 캐싱 처리
- **출력**: 
  - 경기장 목록 (드롭다운, 카드 등)

### 기능명: 검색 및 필터링
- **입력**: 
  - 검색어 (문자열)
  - 필터 조건 (날짜, 팀, 결과 등)
- **처리**: 
  - 실시간 검색 (디바운싱)
  - 필터 조건 조합
  - 정렬 옵션 적용
- **출력**: 
  - 필터링된 결과 목록
  - 검색 결과 개수
  - 정렬 상태 표시

---

## 📱 UI/UX 기능

### 기능명: 반응형 레이아웃
- **입력**: 
  - 화면 크기 (CSS 미디어 쿼리)
- **처리**: 
  - 브레이크포인트별 레이아웃 변경
  - 컴포넌트 크기 조정
  - 네비게이션 형태 변경
- **출력**: 
  - 모바일/태블릿/데스크톱 최적화 UI

### 기능명: 로딩 상태 관리
- **입력**: 
  - API 요청 상태
- **처리**: 
  - 로딩 스피너 표시
  - 스켈레톤 UI 표시
  - 에러 상태 처리
- **출력**: 
  - 로딩 인디케이터
  - 에러 메시지
  - 재시도 버튼

### 기능명: 토스트 알림
- **입력**: 
  - 메시지 타입 (성공, 에러, 경고, 정보)
  - 메시지 내용
- **처리**: 
  - 토스트 컴포넌트 렌더링
  - 자동 사라짐 타이머
- **출력**: 
  - 토스트 알림 표시
  - 자동 사라짐

---

## 🔒 보안 기능

### 기능명: 인증 상태 확인
- **입력**: 
  - JWT 토큰 (localStorage)
- **처리**: 
  - 토큰 유효성 검증
  - 만료 시간 확인
  - 자동 갱신 시도
- **출력**: 
  - 인증 상태 (로그인/로그아웃)
  - 보호된 페이지 접근 제어

### 기능명: 권한 기반 접근 제어
- **입력**: 
  - 사용자 역할 (일반/관리자)
  - 페이지/기능 권한
- **처리**: 
  - 권한 확인 로직
  - 조건부 렌더링
- **출력**: 
  - 권한에 따른 UI 표시/숨김
  - 접근 제한 메시지 